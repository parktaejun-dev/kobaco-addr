name: Keep Streamlit App Alive
# 이 워크플로우를 실행할 이벤트 설정
on:
  schedule:
    # 180분마다 한 번씩 실행 (Cron 스케줄)
    - cron: '*/180 * * * *'
  # (선택) 수동으로도 실행할 수 있게 버튼 추가
  workflow_dispatch:

jobs:
  # 'ping-site'라는 이름의 작업(job) 정의
  ping-site:
    # 'ubuntu' 최신 버전 환경에서 실행
    runs-on: ubuntu-latest
    
    steps:
      # 'Ping Streamlit App'이라는 이름의 단계(step)
      - name: Ping Streamlit App
        # 실제 실행할 명령어
        # curl로 사이트에 접속하되, 60초까지 기다림 (앱이 깨어나는 시간)
        # || true를 붙여서, 혹시 사이트가 일시적으로 오류가 나도 GitHub Action 자체는 '성공'으로 처리
        run: curl -m 60 https://kobata.streamlit.app/ || true