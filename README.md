# 🚀 KOBACO AI 전략 컨설턴트 시스템 - v2.0 업그레이드

## 📌 주요 개선사항

### ✨ 새로운 기능

#### 1. **AI 추천의 투명성 강화** ⭐ 핵심 업그레이드!
- **적합도 점수 (Confidence Score)**: 각 세그먼트마다 0-100점 척도의 적합도 점수 제공
- **추천 이유 상세화**: AI가 왜 해당 세그먼트를 추천했는지 명확한 근거 제시
- **핵심 매칭 요소 (Key Factors)**: 제품과 세그먼트를 연결하는 핵심 키워드 표시
- **대안 세그먼트**: 추천 3개 외에 고려할 만한 대안 제시

#### 2. **네이밍 개선 - AI 전략 컨설턴트로 포지셔닝**
| 이전 | 개선 |
|------|------|
| 견적 계산하기 | 🤖 AI 최적화 플랜 생성 |
| 견적 결과 | 📊 AI 전략 분석 결과 |
| 견적서 | 📄 AI 광고 전략 제안서 |
| 세그먼트 추천 받기 | 🎯 AI 타겟 분석 요청 |

#### 3. **시각화 강화**
- 적합도 점수 프로그레스 바
- 핵심 매칭 요소 배지 표시
- 색상 코드로 점수 등급 구분 (90+: 🎯, 80+: ✅, 70+: 👍)

#### 4. **전략 제안서 고도화**
- HTML 리포트에 적합도 점수 표시
- 핵심 매칭 요소 포함
- 더욱 전문적인 제안서 레이아웃

---

## 📁 프로젝트 구조

```
KOBACO-AI-System/
├── main.py                              # 메인 애플리케이션
├── gemini_segment_recommender_v2.py     # AI 추천 엔진 (v2 업그레이드)
├── data_manager.py                      # 데이터 관리 모듈
├── estimate_calculator.py               # 견적 계산 모듈
├── requirements.txt                     # 패키지 의존성
├── .env                                 # 환경 변수 (API 키)
├── data/                                # 데이터 폴더
│   ├── channels.csv                     # 채널 정보
│   ├── bonuses.csv                      # 보너스 정책
│   ├── surcharges.csv                   # 할증 정책
│   └── segments.json                    # 세그먼트 데이터
└── README.md                            # 이 문서
```

---

## 🛠️ 설치 및 실행 가이드

### 1️⃣ 환경 설정

```bash
# 1. 패키지 설치
pip install -r requirements.txt

# 2. Gemini API 키 설정
# .env 파일을 열고 GEMINI_API_KEY에 본인의 API 키 입력
# API 키는 https://aistudio.google.com/app/apikey 에서 발급 가능
```

### 2️⃣ Streamlit Secrets 설정 (관리자 로그인용)

`.streamlit/secrets.toml` 파일 생성:

```toml
admin_id = "admin"
admin_password = "your_secure_password"
```

### 3️⃣ 애플리케이션 실행

```bash
streamlit run main.py
```

브라우저에서 `http://localhost:8501` 자동 실행됩니다.

---

## 🎯 사용 방법

### 1. **제품 정보 입력**
- 광고주명, 제품명 입력 (필수)
- 제품 URL 입력 (선택 - AI 분석 정확도 향상)

### 2. **AI 타겟 분석 요청**
- "🤖 AI 타겟 분석 요청" 버튼 클릭
- AI가 웹사이트를 분석하고 최적 타겟 3개 추천
- **각 추천마다 다음 정보 제공**:
  - 적합도 점수 (0-100점)
  - 상세한 추천 이유
  - 핵심 매칭 요소

### 3. **광고 설정**
- 광고 초수 선택 (15초/30초)
- 타겟팅 옵션 설정
- 지역 타겟팅 (선택)

### 4. **예산 설정**
- 총 월 예산 입력
- 채널별 예산 배분

### 5. **AI 최적화 플랜 생성**
- "🧮 AI 최적화 플랜 생성" 버튼 클릭
- AI가 전략 분석 결과 제공

### 6. **전략 제안서 다운로드**
- "📄 AI 광고 전략 제안서 생성" 버튼 클릭
- 새 창에서 열린 제안서를 PDF로 저장 (Ctrl+P)

---

## 🆕 v2.0 주요 변경사항

### 코드 개선

#### `gemini_segment_recommender_v2.py`
- ✅ AI 응답 구조 확장 (적합도 점수, 핵심 요소 추가)
- ✅ 프롬프트 엔지니어링 강화
- ✅ 시각화 UI 개선 (`display_recommendations()`)
- ✅ 코드 주석 대폭 강화 (초보자 친화적)

#### `main.py`
- ✅ 네이밍 전면 개선 (AI 전략 컨설턴트 포지셔닝)
- ✅ 버튼 텍스트 및 메시지 업데이트
- ✅ `use_container_width=True` 적용 (UI 일관성)

#### `estimate_calculator.py`
- ✅ HTML 템플릿에 적합도 점수 추가
- ✅ 핵심 매칭 요소 표시
- ✅ 제안서 제목 변경: "AI 광고 전략 제안서"

---

## 🔍 AI 추천 작동 원리

### 1. **제품 분석**
- 제품명과 웹사이트 URL을 기반으로 제품 특성 파악
- 웹사이트 메타 태그 및 본문 내용 스크래핑

### 2. **세그먼트 매칭**
- 92개 세그먼트 중 제품과 가장 관련성 높은 3개 선택
- **적합도 점수 산출 기준**:
  - 90-100점: 거의 완벽하게 매칭
  - 80-89점: 매우 적합
  - 70-79점: 적합
  - 60-69점: 어느 정도 관련성 있음

### 3. **투명성 확보**
- 각 추천마다 상세한 이유 제공
- 핵심 매칭 키워드 명시
- 사용자가 AI 결정을 신뢰하고 납득할 수 있도록 지원

---

## 🎨 UI/UX 개선사항

### 시각적 요소
- ✅ 적합도 점수 프로그레스 바
- ✅ 점수별 이모지 (🎯 ✅ 👍)
- ✅ 핵심 매칭 요소 배지 (`키워드` 스타일)
- ✅ 구조화된 카드 레이아웃

### 메시지 개선
```python
# 이전
"견적을 계산 중입니다..."

# 개선
"🤖 AI가 최적의 광고 전략을 분석 중입니다..."
"🤖 AI가 제품을 분석하고 최적의 타겟을 추천 중입니다..."
```

---

## 📊 예시 출력

### AI 추천 결과 예시

```
🎯 1. 모바일 데이터 활용 세그 > 페르소나 > 영유아 부모

적합도: ████████████████████ 95점

📋 영유아 자녀를 양육하며 육아,교육에 관심 많은 고객

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

💡 AI 추천 이유
로봇청소기는 육아로 바쁜 가정에서 시간을 절약할 수 있는 필수 가전제품입니다. 
영유아 부모는 청결과 효율성을 중시하며, 스마트홈 기기에 대한 구매력이 높습니다.

🔑 핵심 매칭 요소
`육아`  `시간절약`  `청결`  `스마트홈`
```

---

## ⚠️ 주의사항

### 1. API 키 관리
- `.env` 파일은 절대 Git에 커밋하지 마세요
- `.gitignore`에 `.env` 포함 확인

### 2. 데이터 파일
- `data/` 폴더의 CSV/JSON 파일 수정 시 백업 권장
- 잘못된 형식으로 저장하면 앱이 작동하지 않을 수 있음

### 3. Gemini API 제한
- 무료 계정: 분당 15회 요청 제한
- 오류 발생 시 잠시 대기 후 재시도

---

## 🐛 문제 해결

### 문제: "Gemini API 키가 설정되지 않았습니다"
**해결**: `.env` 파일에 올바른 API 키 입력 확인

### 문제: "데이터 파일을 찾을 수 없습니다"
**해결**: `data/` 폴더와 CSV 파일들이 존재하는지 확인

### 문제: AI 추천이 느리거나 실패
**해결**: 
1. 인터넷 연결 확인
2. API 키 유효성 확인
3. Gemini API 할당량 확인

---

## 🔮 향후 계획 (Phase 2)

다음 업데이트에서는 다음 기능들이 추가될 예정입니다:

1. **전략 분석 모듈** (`ai/strategy_analyzer.py`)
   - 전체 캠페인 전략 분석
   - 예산 최적화 제안
   - 예상 성과 시뮬레이션

2. **모듈화 개선**
   - UI 컴포넌트 분리
   - 프롬프트 템플릿 분리
   - 유틸리티 함수 모듈화

3. **리포트 고도화**
   - Executive Summary 추가
   - 예상 성과 및 KPI 섹션
   - 실행 권장사항

---

## 📞 지원

문제가 발생하거나 질문이 있으시면:
- 📧 이메일: tj1000@kobaco.co.kr
- 🤖 챗봇: [NotebookLM 링크](https://notebooklm.google.com/notebook/ab573898-2bb6-4034-8694-bc1c08d480c7)

---

## 📝 라이선스

© 2025 KOBACO. All rights reserved.
